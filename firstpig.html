<!DOCTYPE html>
<html lang="th">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ผู้จัดการทีมฟุตบอล 2 ผู้เล่น</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      :root {
        --primary-color: #007bff; /* Blue */
        --secondary-color: #28a745; /* Green */
        --dark-bg-color: #121212;
        --card-bg: rgba(255, 255, 255, 0.95);
        --text-color: #343a34;
        --border-color: #dee2e6;
        --shadow-color: rgba(0, 0, 0, 0.2);
        --player1-bg: #e6f7ff;
        --player2-bg: #e6fff7;
      }

      body {
        font-family: "Kanit", sans-serif;
        background: url("https://images.unsplash.com/photo-1517649763962-db32309e4ab8?auto=format&fit=crop&w=1920&q=80")
          no-repeat center center fixed;
        background-size: cover;
        margin: 0;
        padding: 0;
        min-height: 100vh;
        color: var(--text-color);
        position: relative;
        overflow-x: hidden;
      }

      body::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.6);
        z-index: 0;
      }

      .content-wrapper {
        position: relative;
        z-index: 1;
        padding: 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .header {
        background-image: linear-gradient(45deg, #0056b3, #00a8c5);
        color: #fff;
        padding: 30px;
        border-radius: 15px;
        margin-bottom: 30px;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        animation: fadeIn 1s ease-out;
        max-width: 900px;
        width: 100%;
        text-align: center;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(-20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      h1 {
        margin: 0;
        font-size: 3.5rem;
        font-weight: 700;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
      }

      .main-container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 30px;
        width: 100%;
        max-width: 1200px;
      }

      .player-section {
        background: var(--card-bg);
        border-radius: 15px;
        box-shadow: 0 8px 20px var(--shadow-color);
        padding: 30px;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }

      .player-section:hover {
        transform: translateY(-10px);
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.25);
      }

      .player-section.player1 {
        background-color: var(--player1-bg);
      }

      .player-section.player2 {
        background-color: var(--player2-bg);
      }

      h2 {
        color: var(--primary-color);
        border-bottom: 4px solid var(--primary-color);
        padding-bottom: 15px;
        margin-top: 0;
        font-size: 2.2rem;
        font-weight: 700;
      }

      .player-section.player2 h2 {
        color: var(--secondary-color);
        border-bottom-color: var(--secondary-color);
      }

      .player-selection-area {
        display: flex;
        flex-direction: column;
        gap: 20px;
        align-items: center;
      }

      .team-selection h3 {
        font-size: 1.5rem;
        font-weight: 600;
        margin: 15px 0 10px;
      }

      select,
      .action-button {
        width: 100%;
        max-width: 350px;
        padding: 15px;
        border-radius: 10px;
        border: 2px solid var(--border-color);
        font-size: 1.1rem;
        font-family: "Kanit", sans-serif;
        cursor: pointer;
        background-color: #f8f9fa;
        transition: all 0.3s ease;
      }

      select:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 10px rgba(0, 123, 255, 0.4);
      }

      .logo-preview {
        height: 80px;
        width: 80px;
        margin: 15px 0;
        border-radius: 50%;
        object-fit: contain;
        background-color: #fff;
        padding: 10px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      }

      .league-logo {
        height: 100px;
        width: 100px;
        margin: 15px 0;
        object-fit: contain;
      }

      .player-cards-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 15px;
        margin-top: 20px;
      }

      .player-card {
        background: #f8f9fa;
        border-radius: 12px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        padding: 20px;
        width: 180px;
        text-align: center;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        transition: transform 0.2s, border 0.2s;
        border: 3px solid transparent;
      }

      .player-card.selected {
        border-color: var(--secondary-color);
        background-color: #e9fbf0;
        box-shadow: 0 6px 15px rgba(40, 167, 69, 0.4);
      }

      .player-card strong {
        font-weight: 700;
        font-size: 1.2rem;
        color: var(--text-color);
      }

      .player-card button {
        background: var(--primary-color);
        color: #fff;
        border: none;
        padding: 12px 18px;
        border-radius: 8px;
        cursor: pointer;
        margin-top: 15px;
        font-family: "Kanit", sans-serif;
        font-weight: 600;
        font-size: 1rem;
        transition: background-color 0.3s, transform 0.2s;
      }

      .player-card button:hover:not(:disabled) {
        background: #0056b3;
        transform: translateY(-2px);
      }

      .player-card button:disabled {
        background-color: #adb5bd;
        cursor: not-allowed;
        transform: none;
      }

      .player-card.team-card button {
        background: #dc3545;
      }

      .player-card.team-card button:hover:not(:disabled) {
        background: #c82333;
      }

      .action-buttons {
        margin-top: 50px;
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 20px;
      }

      .action-button {
        font-size: 1.3rem;
        font-weight: 700;
        color: #fff;
        max-width: 250px;
        padding: 18px 30px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
        border: none;
        text-decoration: none;
        display: inline-block;
      }

      .simulate-btn {
        background-color: var(--secondary-color);
      }

      .simulate-btn:hover {
        background-color: #218838;
      }

      .reset-btn {
        background-color: #6c757d;
      }

      .reset-btn:hover {
        background-color: #5a6268;
      }

      .back-btn {
        background-color: #ffc107;
      }

      .back-btn:hover {
        background-color: #e0a800;
      }

      /* RESULT SECTION STYLES */
      .result-section {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 20px;
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.5);
        padding: 50px;
        text-align: center;
        max-width: 900px;
        width: 90%;
        margin-top: 50px;
        animation: fadeIn 1s ease-out;
        display: none; /* เริ่มต้นด้วยการซ่อน */
      }

      .result-section.show {
        display: block; /* แสดงผลเมื่อกดปุ่ม */
      }

      .match-info {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 40px;
        margin: 40px 0;
      }

      .team-box {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 15px;
      }

      .team-box img {
        height: 120px;
        width: 120px;
        object-fit: contain;
        background-color: #fff;
        border-radius: 50%;
        padding: 10px;
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
      }

      .team-box h2 {
        font-size: 2.2rem;
        font-weight: 600;
        margin: 0;
        color: var(--text-color);
      }

      .vs-text {
        font-size: 3rem;
        font-weight: 700;
        color: #6c757d;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
      }

      .match-result {
        font-size: 4rem;
        font-weight: bold;
        margin: 40px 0;
        color: var(--secondary-color);
      }

      .details-section {
        margin-top: 40px;
        text-align: left;
        background-color: #f8f9fa;
        padding: 30px;
        border-radius: 15px;
        border: 2px dashed #e9ecef;
        display: flex;
        gap: 40px;
        justify-content: center;
      }

      .details-section h3 {
        font-size: 2rem;
        color: var(--primary-color);
        margin-top: 0;
      }

      .player-list {
        list-style: none;
        padding: 0;
        margin: 0;
        display: grid;
        gap: 10px;
      }

      .player-list li {
        font-size: 1.2rem;
        display: flex;
        justify-content: space-between;
        padding: 10px 15px;
        background: #fff;
        border-radius: 8px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
      }

      .player-list li strong {
        color: var(--primary-color);
      }

      .player-list.p1 li strong {
        color: var(--primary-color);
      }
      .player-list.p2 li strong {
        color: var(--secondary-color);
      }

      .power-total {
        font-size: 1.5rem;
        font-weight: bold;
        text-align: center;
        margin-bottom: 15px;
      }

      @media (max-width: 992px) {
        .main-container {
          grid-template-columns: 1fr;
        }
        h1 {
          font-size: 2.5rem;
        }
        .match-info {
          flex-direction: column;
          gap: 20px;
        }
        .match-result {
          font-size: 3rem;
        }
        .details-section {
          flex-direction: column;
          gap: 20px;
        }
      }
    </style>
  </head>
  <body>
    <div class="content-wrapper">
      <div class="header">
        <h1>⚽ ผู้จัดการทีมฟุตบอล 2 ผู้เล่น</h1>
        <p>เลือกลีกและนักเตะ 5 คนเพื่อมาดวลกัน!</p>
      </div>

      <div id="selectionArea">
        <div class="main-container">
          <div class="player-section player1">
            <h2>ผู้เล่นที่ 1</h2>
            <div class="player-selection-area">
              <div class="team-selection">
                <h3>เลือกลีก</h3>
                <select id="league1" onchange="onLeagueChange(1)">
                  <option value="epl">พรีเมียร์ลีก (อังกฤษ)</option>
                  <option value="laliga">ลาลีกา (สเปน)</option>
                  <option value="bundesliga">บุนเดสลีกา (เยอรมัน)</option>
                  <option value="ligue1">ลีกเอิง (ฝรั่งเศส)</option>
                  <option value="seriea">กัลโช่ เซเรีย อา (อิตาลี)</option>
                </select>
                <img
                  id="leagueLogo1"
                  class="league-logo"
                  src=""
                  alt="โลโก้ลีก 1"
                />
                <h3>เลือกทีม</h3>
                <select id="teamLogo1" onchange="updateLogo(1)"></select>
                <img
                  id="logoPreview1"
                  class="logo-preview"
                  src=""
                  alt="โลโก้ทีม 1"
                />
              </div>
              <hr />
              <h3>เลือกนักเตะ (5 คน)</h3>
              <div class="player-cards-container" id="player1Area"></div>
            </div>
            <div class="player-cards-container" id="team1"></div>
          </div>

          <div class="player-section player2">
            <h2>ผู้เล่นที่ 2</h2>
            <div class="player-selection-area">
              <div class="team-selection">
                <h3>เลือกลีก</h3>
                <select id="league2" onchange="onLeagueChange(2)">
                  <option value="epl">พรีเมียร์ลีก (อังกฤษ)</option>
                  <option value="laliga">ลาลีกา (สเปน)</option>
                  <option value="bundesliga">บุนเดสลีกา (เยอรมัน)</option>
                  <option value="ligue1">ลีกเอิง (ฝรั่งเศส)</option>
                  <option value="seriea">กัลโช่ เซเรีย อา (อิตาลี)</option>
                </select>
                <img
                  id="leagueLogo2"
                  class="league-logo"
                  src=""
                  alt="โลโก้ลีก 2"
                />
                <h3>เลือกทีม</h3>
                <select id="teamLogo2" onchange="updateLogo(2)"></select>
                <img
                  id="logoPreview2"
                  class="logo-preview"
                  src=""
                  alt="โลโก้ทีม 2"
                />
              </div>
              <hr />
              <h3>เลือกนักเตะ (5 คน)</h3>
              <div class="player-cards-container" id="player2Area"></div>
            </div>
            <div class="player-cards-container" id="team2"></div>
          </div>
        </div>
        <div class="action-buttons">
          <button class="action-button simulate-btn" onclick="simulateMatch()">
            เริ่มการแข่งขัน
          </button>
        </div>
      </div>

      <div id="resultArea" class="result-section">
        <h1>ผลการแข่งขัน</h1>
        <div class="match-info">
          <div class="team-box">
            <img id="team1Logo" src="" alt="โลโก้ทีม 1" />
            <h2 id="team1Name"></h2>
          </div>
          <div class="vs-text">VS</div>
          <div class="team-box">
            <img id="team2Logo" src="" alt="โลโก้ทีม 2" />
            <h2 id="team2Name"></h2>
          </div>
        </div>
        <div id="matchResult" class="match-result"></div>
        <div class="details-section">
          <div class="team-details">
            <h4 id="team1DetailsName" style="color: var(--primary-color)"></h4>
            <ul class="player-list p1" id="team1PowerList"></ul>
            <div
              id="team1PowerTotal"
              class="power-total"
              style="color: var(--primary-color)"
            ></div>
          </div>
          <div class="team-details">
            <h4
              id="team2DetailsName"
              style="color: var(--secondary-color)"
            ></h4>
            <ul class="player-list p2" id="team2PowerList"></ul>
            <div
              id="team2PowerTotal"
              class="power-total"
              style="color: var(--secondary-color)"
            ></div>
          </div>
        </div>
        <div class="action-buttons">
          <button class="action-button reset-btn" onclick="resetGame()">
            เล่นใหม่อีกครั้ง
          </button>
          <a href="index.html" class="action-button back-btn">
            กลับหน้าเลือกโหมดเกม
          </a>
        </div>
      </div>
    </div>

    <script>
      const leagues = {
        //... (ข้อมูล leagues เดิม) ...
        epl: {
          name: "พรีเมียร์ลีก",
          logo: "https://upload.wikimedia.org/wikipedia/th/f/f2/Premier_League_Logo.svg",
          teams: {
            man_city: "แมนฯซิตี้",
            liverpool: "ลิเวอร์พูล",
            arsenal: "อาร์เซนอล",
            chelsea: "เชลซี",
            man_united: "แมนฯยูไนเต็ด",
          },
          logos: {
            man_city:
              "https://upload.wikimedia.org/wikipedia/en/e/eb/Manchester_City_FC_badge.svg",
            liverpool:
              "https://upload.wikimedia.org/wikipedia/en/0/0c/Liverpool_FC.svg",
            arsenal:
              "https://upload.wikimedia.org/wikipedia/en/5/53/Arsenal_FC.svg",
            chelsea:
              "https://upload.wikimedia.org/wikipedia/en/c/cc/Chelsea_FC.svg",
            man_united:
              "https://upload.wikimedia.org/wikipedia/en/7/7a/Manchester_United_FC_crest.svg",
          },
          players: [
            "Erling Haaland",
            "Kevin De Bruyne",
            "Phil Foden",
            "Bukayo Saka",
            "Declan Rice",
            "Martin Ødegaard",
            "Mohamed Salah",
            "Virgil van Dijk",
            "Alisson Becker",
            "Dominik Szoboszlai",
            "Cole Palmer",
            "Christopher Nkunku",
            "Enzo Fernández",
            "Bruno Fernandes",
            "Marcus Rashford",
            "Rasmus Højlund",
            "James Maddison",
            "Son Heung-min",
            "Alejandro Garnacho",
            "Luis Díaz",
          ],
        },
        laliga: {
          name: "ลาลีกา",
          logo: "https://upload.wikimedia.org/wikipedia/commons/4/4b/LaLiga_2023_logo.svg",
          teams: {
            real_madrid: "เรอัล มาดริด",
            barcelona: "บาร์เซโลนา",
            atletico: "แอตเลติโก มาดริด",
            sevilla: "เซบียา",
            real_sociedad: "เรอัล โซเซียดาด",
          },
          logos: {
            real_madrid:
              "https://upload.wikimedia.org/wikipedia/en/5/56/Real_Madrid_CF.svg",
            barcelona:
              "https://upload.wikimedia.org/wikipedia/en/4/47/FC_Barcelona_%28crest%29.svg",
            atletico: "https://media.api-sports.io/football/teams/530.png",
            sevilla: "https://media.api-sports.io/football/teams/536.png",
            real_sociedad: "https://media.api-sports.io/football/teams/531.png",
          },
          players: [
            "Karim Benzema",
            "Vinicius Jr.",
            "Rodrigo",
            "Ferran Torres",
            "Pedri",
            "Gavi",
            "Robert Lewandowski",
            "Jules Koundé",
            "Jan Oblak",
            "Alex Remiro",
            "Pablo Sarabia",
            "Iñaki Williams",
            "Mikel Oyarzabal",
            "Yeremy Pino",
            "Joselu",
            "Marc Roca",
            "Sergio Busquets",
            "Jordi Alba",
            "Ansu Fati",
            "Ferran Jutglà",
          ],
        },
        bundesliga: {
          name: "บุนเดสลีกา",
          logo: "https://upload.wikimedia.org/wikipedia/en/thumb/d/df/Bundesliga_logo_%282017%29.svg/1200px-Bundesliga_logo_%282017%29.svg.png",
          teams: {
            bayern: "บาเยิร์น มิวนิค",
            dortmund: "โบรุสเซีย ดอร์ทมุนด์",
            leipzig: "แอร์เบ ไลป์ซิก",
            leverkusen: "ไบเออร์ เลเวอร์คูเซ่น",
            gladbach: "โบรุสเซีย มึนเช่นกลัดบัค",
          },
          logos: {
            bayern: "https://media.api-sports.io/football/teams/157.png",
            dortmund:
              "https://upload.wikimedia.org/wikipedia/commons/6/67/Borussia_Dortmund_logo.svg",
            leipzig:
              "https://upload.wikimedia.org/wikipedia/en/0/04/RB_Leipzig_2014_logo.svg",
            leverkusen: "https://media.api-sports.io/football/teams/168.png",
            gladbach: "https://media.api-sports.io/football/teams/176.png",
          },
          players: [
            "Jamal Musiala",
            "Sadio Mané",
            "Jude Bellingham",
            "Christopher Nkunku",
            "Thomas Müller",
            "Leon Goretzka",
            "Erling Haaland",
            "Dayot Upamecano",
            "Manuel Neuer",
            "Marco Reus",
            "Karim Adeyemi",
            "Florian Wirtz",
            "Moussa Diaby",
            "Josko Gvardiol",
            "Leroy Sané",
            "Benjamin Pavard",
            "David Raum",
            "Niklas Süle",
            "Serge Gnabry",
            "Kingsley Coman",
          ],
        },
        ligue1: {
          name: "ลีกเอิง",
          logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/c/cd/Ligue_1_Uber_Eats_logo.svg/1200px-Ligue_1_Uber_Eats_logo.svg.png",
          teams: {
            psg: "ปารีส แซงต์ แชร์กแมง",
            lyon: "โอลิมปิก ลียง",
            marseille: "โอลิมปิก มาร์เซย",
            monaco: "โมนาโก",
            nice: "นีซ",
          },
          logos: {
            psg: "https://upload.wikimedia.org/wikipedia/en/a/a7/Paris_Saint-Germain_F.C..svg",
            lyon: "https://media.api-sports.io/football/teams/101.png",
            marseille: "https://media.api-sports.io/football/teams/98.png",
            monaco: "https://media.api-sports.io/football/teams/91.png",
            nice: "https://media.api-sports.io/football/teams/106.png",
          },
          players: [
            "Kylian Mbappé",
            "Neymar",
            "Marco Verratti",
            "Achraf Hakimi",
            "Lionel Messi",
            "Presnel Kimpembe",
            "Marquinhos",
            "Sergio Ramos",
            "Wijnaldum",
            "Gianluigi Donnarumma",
            "Hugo Ekitike",
            "Vitinha",
            "Jonathan Clauss",
            "Seko Fofana",
            "Alexandre Lacazette",
            "Corentin Tolisso",
            "Mattéo Guendouzi",
            "Gaëtan Laborde",
            "Amine Gouiri",
            "Randal Kolo Muani",
          ],
        },
        seriea: {
          name: "กัลโช่ เซเรีย อา",
          logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/e/e0/Lega_Serie_A_logo.svg/200px-Lega_Serie_A_logo.svg.png",
          teams: {
            juventus: "ยูเวนตุส",
            inter: "อินเตอร์ มิลาน",
            milan: "เอซี มิลาน",
            napoli: "นาโปลี",
            roma: "โรม่า",
          },
          logos: {
            juventus: "https://media.api-sports.io/football/teams/496.png",
            inter: "https://media.api-sports.io/football/teams/505.png",
            milan:
              "https://upload.wikimedia.org/wikipedia/commons/d/d0/Logo_of_AC_Milan.svg",
            napoli: "https://media.api-sports.io/football/teams/492.png",
            roma: "https://media.api-sports.io/football/teams/497.png",
          },
          players: [
            "Victor Osimhen",
            "Paulo Dybala",
            "Lautaro Martínez",
            "Dusan Vlahovic",
            "Nicolo Barella",
            "Sergej Milinković-Savić",
            "Zlatan Ibrahimović",
            "Federico Chiesa",
            "Giovanni Di Lorenzo",
            "Theo Hernández",
            "Jorginho",
            "Khvicha Kvaratskhelia",
            "Alex Meret",
            "Milan Škriniar",
            "Matteo Politano",
            "Francesco Caputo",
            "Dusan Vlahovic",
            "Robin Gosens",
            "Davide Calabria",
            "Lorenzo Pellegrini",
          ],
        },
      };

      let playersData1 = [];
      let playersData2 = [];
      let team1 = [];
      let team2 = [];

      function onLeagueChange(playerNum) {
        if (playerNum === 1) {
          team1 = [];
          document.getElementById("team1").innerHTML = "";
        } else {
          team2 = [];
          document.getElementById("team2").innerHTML = "";
        }

        const leagueSelect = document.getElementById(`league${playerNum}`);
        const teamSelect = document.getElementById(`teamLogo${playerNum}`);
        const leagueLogo = document.getElementById(`leagueLogo${playerNum}`);
        const league = leagues[leagueSelect.value];

        leagueLogo.src = league.logo;

        teamSelect.innerHTML = "";
        for (const [key, name] of Object.entries(league.teams)) {
          const option = document.createElement("option");
          option.value = key;
          option.textContent = name;
          teamSelect.appendChild(option);
        }
        updateLogo(playerNum);

        const playersData = league.players.map((name) => ({
          name,
          power: Math.floor(Math.random() * 21) + 70, // 70-90
        }));

        if (playerNum === 1) {
          playersData1 = playersData;
        } else {
          playersData2 = playersData;
        }

        renderPlayerSelection(
          `player${playerNum}Area`,
          playerNum === 1 ? team1 : team2,
          playerNum
        );
      }

      function updateLogo(playerNum) {
        const teamSelect = document.getElementById(`teamLogo${playerNum}`);
        const logoPreview = document.getElementById(`logoPreview${playerNum}`);
        const leagueSelect = document.getElementById(`league${playerNum}`);
        const league = leagues[leagueSelect.value];

        if (teamSelect.value && league.logos[teamSelect.value]) {
          logoPreview.src = league.logos[teamSelect.value];
        } else {
          logoPreview.src = "";
        }
      }

      function renderPlayerSelection(areaId, teamArray, playerNum) {
        const container = document.getElementById(areaId);
        container.innerHTML = "";
        const playersData = playerNum === 1 ? playersData1 : playersData2;
        playersData.forEach((player, index) => {
          const isSelected =
            team1.includes(player) ||
            team2.includes(player) ||
            teamArray.includes(player);
          const card = document.createElement("div");
          card.className = "player-card";
          card.classList.toggle("selected", isSelected);
          card.innerHTML = `
            <strong>${player.name}</strong><br>
            <button onclick="addToTeam(${playerNum}, ${index})" ${
            isSelected || teamArray.length >= 5 ? "disabled" : ""
          }>
              ${isSelected ? "ถูกเลือกแล้ว" : "เลือก"}
            </button>
          `;
          container.appendChild(card);
        });
      }

      function renderTeam(teamArray, containerId, playerNum) {
        const container = document.getElementById(containerId);
        container.innerHTML = "";
        teamArray.forEach((player, i) => {
          const card = document.createElement("div");
          card.className = "player-card team-card";
          card.innerHTML = `
            <strong>${player.name}</strong><br>
            <button onclick="removeFromTeam(${playerNum}, ${i})">เปลี่ยนตัว</button>
          `;
          container.appendChild(card);
        });
        renderPlayerSelection(`player${playerNum}Area`, teamArray, playerNum);
      }

      function addToTeam(playerNum, index) {
        const playersData = playerNum === 1 ? playersData1 : playersData2;
        const selected = playersData[index];
        if (team1.includes(selected) || team2.includes(selected)) {
          alert("ผู้เล่นคนนี้ถูกเลือกไปแล้วในทีมอื่น!");
          return;
        }

        if (playerNum === 1) {
          if (team1.length >= 5) return alert("ผู้เล่น 1 เลือกครบ 5 คนแล้ว");
          team1.push(selected);
          renderTeam(team1, "team1", 1);
        } else {
          if (team2.length >= 5) return alert("ผู้เล่น 2 เลือกครบ 5 คนแล้ว");
          team2.push(selected);
          renderTeam(team2, "team2", 2);
        }
      }

      function removeFromTeam(playerNum, i) {
        if (playerNum === 1) {
          team1.splice(i, 1);
          renderTeam(team1, "team1", 1);
        } else {
          team2.splice(i, 1);
          renderTeam(team2, "team2", 2);
        }
      }

      // NEW FUNCTION
      function simulateMatch() {
        if (team1.length !== 5 || team2.length !== 5) {
          alert("ทั้งสองฝ่ายต้องเลือกนักเตะให้ครบ 5 คนก่อน!");
          return;
        }

        // Hide selection area
        document.getElementById("selectionArea").style.display = "none";

        // Show result area
        const resultArea = document.getElementById("resultArea");
        resultArea.style.display = "block";
        resultArea.classList.add("show");

        const league1 = document.getElementById("league1").value;
        const league2 = document.getElementById("league2").value;
        const teamName1 =
          leagues[league1].teams[document.getElementById("teamLogo1").value];
        const teamName2 =
          leagues[league2].teams[document.getElementById("teamLogo2").value];
        const logo1 =
          leagues[league1].logos[document.getElementById("teamLogo1").value];
        const logo2 =
          leagues[league2].logos[document.getElementById("teamLogo2").value];

        const power1 = team1.reduce((sum, p) => sum + p.power, 0);
        const power2 = team2.reduce((sum, p) => sum + p.power, 0);

        let resultText = "";
        if (power1 > power2) {
          resultText = `${teamName1} ชนะ!`;
        } else if (power2 > power1) {
          resultText = `${teamName2} ชนะ!`;
        } else {
          resultText = `เสมอ`;
        }

        document.getElementById("team1Logo").src = logo1;
        document.getElementById("team1Name").textContent = teamName1;
        document.getElementById("team2Logo").src = logo2;
        document.getElementById("team2Name").textContent = teamName2;
        document.getElementById("matchResult").textContent = resultText;

        renderPowerList(team1, "team1PowerList", "team1PowerTotal", power1);
        renderPowerList(team2, "team2PowerList", "team2PowerTotal", power2);
      }

      function renderPowerList(team, listId, totalId, totalPower) {
        const list = document.getElementById(listId);
        list.innerHTML = "";
        team.forEach((p) => {
          const li = document.createElement("li");
          li.innerHTML = `<span>${p.name}</span><strong>${p.power}</strong>`;
          list.appendChild(li);
        });
        document.getElementById(totalId).textContent = `รวม: ${totalPower}`;
      }

      function resetGame() {
        team1 = [];
        team2 = [];
        document.getElementById("selectionArea").style.display = "block";
        document.getElementById("resultArea").style.display = "none";
        document.getElementById("resultArea").classList.remove("show");

        document.getElementById("league1").value = "epl";
        document.getElementById("league2").value = "epl";

        setupTeamsAndPlayers(1);
        setupTeamsAndPlayers(2);
      }

      function setupTeamsAndPlayers(playerNum) {
        //... (โค้ดเดิม) ...
      }
      // ... (โค้ดฟังก์ชันอื่นๆ เดิม) ...

      // Initial setup
      onLeagueChange(1);
      onLeagueChange(2);
    </script>
  </body>
</html>
